<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.48">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" type="image/ico" sizes="16x16" href="/img/logo/favicon-16x16.ico"><link rel="icon" type="image/png" sizes="32x32" href="/img/logo/favicon-32x32.png"><meta name="application-name" content="Alomerry Wu"><meta name="apple-mobile-web-app-title" content="Alomerry Wu"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="apple-touch-icon" href="/images/icons/apple-touch-icon.png"><meta name="theme-color" content="#377bb5"><meta name="msapplication-TileColor" content="#377bb5"><title>Redis Note | Alomerry Wu</title><meta name="description" content="Alomerry's blog, powered by VuePress 2, themed by Gungnir.">
    <link rel="modulepreload" href="/assets/app.c3e71323.js"><link rel="modulepreload" href="/assets/2020-07-06-redis-note.html.9f3d9358.js"><link rel="modulepreload" href="/assets/2020-07-06-redis-note.html.a7185526.js"><link rel="prefetch" href="/assets/index.html.b902b90a.js"><link rel="prefetch" href="/assets/2019-07-02-reading-note.html.af46e241.js"><link rel="prefetch" href="/assets/2019-07-18-beian.html.9a14fc8c.js"><link rel="prefetch" href="/assets/2019-08-02-useful-cpp-lib.html.e5cca716.js"><link rel="prefetch" href="/assets/2020-01-17-typecho-theme-plugs.html.b9ddb26c.js"><link rel="prefetch" href="/assets/2020-01-18-gk64-unpack.html.6f138636.js"><link rel="prefetch" href="/assets/2020-02-14-deploy-ssr-server.html.1c393870.js"><link rel="prefetch" href="/assets/2020-07-06-code-review-note.html.bf88cd8c.js"><link rel="prefetch" href="/assets/2020-07-06-git-note.html.63660605.js"><link rel="prefetch" href="/assets/2020-07-06-html-note.html.cdc18b24.js"><link rel="prefetch" href="/assets/2020-07-06-js-make-apple-calculator.html.5b84efb7.js"><link rel="prefetch" href="/assets/2020-08-10-golang-note.html.3d78b74a.js"><link rel="prefetch" href="/assets/2020-10-03-clean-code.html.2891608b.js"><link rel="prefetch" href="/assets/2021-03-01-go-programming-language.html.1e989ed3.js"><link rel="prefetch" href="/assets/2021-03-14-note.html.3a6005e6.js"><link rel="prefetch" href="/assets/2021-03-15-postman.html.39a1a0f2.js"><link rel="prefetch" href="/assets/2021-05-22-mongodb.html.a10f4abc.js"><link rel="prefetch" href="/assets/2021-06-23-grpc.html.2bba083a.js"><link rel="prefetch" href="/assets/2021-08-12-rocketmq.html.859108da.js"><link rel="prefetch" href="/assets/2022-02-14-blog.html.ee8af5f4.js"><link rel="prefetch" href="/assets/2022-02-14-code-style.html.047a9c0c.js"><link rel="prefetch" href="/assets/2022-02-14-csapp.html.37fce42c.js"><link rel="prefetch" href="/assets/2022-02-14-go-design.html.3a9ab292.js"><link rel="prefetch" href="/assets/2022-02-14-go-std-lib.html.5683f543.js"><link rel="prefetch" href="/assets/2022-02-14-gopl.html.bb8433ec.js"><link rel="prefetch" href="/assets/2022-02-26-nginx-note.html.3bbbc3a8.js"><link rel="prefetch" href="/assets/2022-03-08-markdown-grammar.html.0d6e2ef9.js"><link rel="prefetch" href="/assets/2022-03-15-system-io.html.48006e3f.js"><link rel="prefetch" href="/assets/2022-04-26-install-rocket-chat.html.42c6b018.js"><link rel="prefetch" href="/assets/2022-04-27-docker.html.6adbc993.js"><link rel="prefetch" href="/assets/2022-04-29-bot-huan.html.ff97f796.js"><link rel="prefetch" href="/assets/2022-04-29-gin-note.html.2eb4b97c.js"><link rel="prefetch" href="/assets/2022-05-21-obs.html.8a1b7a40.js"><link rel="prefetch" href="/assets/2022-05-29-home-vm-ubuntu.html.006f7af6.js"><link rel="prefetch" href="/assets/2022-06-01-linux.html.85a46da5.js"><link rel="prefetch" href="/assets/2022-06-17-frp.html.cd30236b.js"><link rel="prefetch" href="/assets/2022-06-18-v2ray-server.html.4a0a7adb.js"><link rel="prefetch" href="/assets/2022-06-23-jenkins.html.82864e97.js"><link rel="prefetch" href="/assets/2022-06-23-todo.html.6167b369.js"><link rel="prefetch" href="/assets/404.html.7c518b82.js"><link rel="prefetch" href="/assets/index.html.28fa388e.js"><link rel="prefetch" href="/assets/index.html.271c9982.js"><link rel="prefetch" href="/assets/index.html.f805eeef.js"><link rel="prefetch" href="/assets/index.html.aac6ab05.js"><link rel="prefetch" href="/assets/index.html.7573e57d.js"><link rel="prefetch" href="/assets/index.html.3d5a58e5.js"><link rel="prefetch" href="/assets/index.html.191f38a0.js"><link rel="prefetch" href="/assets/index.html.6c5dca76.js"><link rel="prefetch" href="/assets/index.html.20693e11.js"><link rel="prefetch" href="/assets/index.html.c569bd01.js"><link rel="prefetch" href="/assets/index.html.cc437d49.js"><link rel="prefetch" href="/assets/index.html.b291ee43.js"><link rel="prefetch" href="/assets/index.html.d25919a3.js"><link rel="prefetch" href="/assets/index.html.1fe2fdc6.js"><link rel="prefetch" href="/assets/index.html.9b6c5164.js"><link rel="prefetch" href="/assets/index.html.48341d43.js"><link rel="prefetch" href="/assets/index.html.e07d945d.js"><link rel="prefetch" href="/assets/index.html.b21d3d43.js"><link rel="prefetch" href="/assets/index.html.0d29bc77.js"><link rel="prefetch" href="/assets/index.html.5c5f8b50.js"><link rel="prefetch" href="/assets/index.html.5bc6b3e9.js"><link rel="prefetch" href="/assets/2019-07-02-reading-note.html.5317b1da.js"><link rel="prefetch" href="/assets/2019-07-18-beian.html.9ca265b4.js"><link rel="prefetch" href="/assets/2019-08-02-useful-cpp-lib.html.736fcb2a.js"><link rel="prefetch" href="/assets/2020-01-17-typecho-theme-plugs.html.c33aa57d.js"><link rel="prefetch" href="/assets/2020-01-18-gk64-unpack.html.e51bbeaf.js"><link rel="prefetch" href="/assets/2020-02-14-deploy-ssr-server.html.c9c2bfe9.js"><link rel="prefetch" href="/assets/2020-07-06-code-review-note.html.4c5ecd45.js"><link rel="prefetch" href="/assets/2020-07-06-git-note.html.7dce7ae8.js"><link rel="prefetch" href="/assets/2020-07-06-html-note.html.e608782e.js"><link rel="prefetch" href="/assets/2020-07-06-js-make-apple-calculator.html.b4800980.js"><link rel="prefetch" href="/assets/2020-08-10-golang-note.html.fabab21e.js"><link rel="prefetch" href="/assets/2020-10-03-clean-code.html.1120fdd5.js"><link rel="prefetch" href="/assets/2021-03-01-go-programming-language.html.7dff54bf.js"><link rel="prefetch" href="/assets/2021-03-14-note.html.8ee77bd8.js"><link rel="prefetch" href="/assets/2021-03-15-postman.html.18a076a6.js"><link rel="prefetch" href="/assets/2021-05-22-mongodb.html.dd5927eb.js"><link rel="prefetch" href="/assets/2021-06-23-grpc.html.4101fbb4.js"><link rel="prefetch" href="/assets/2021-08-12-rocketmq.html.1da93c5c.js"><link rel="prefetch" href="/assets/2022-02-14-blog.html.94b65d2d.js"><link rel="prefetch" href="/assets/2022-02-14-code-style.html.0372f129.js"><link rel="prefetch" href="/assets/2022-02-14-csapp.html.a34afbde.js"><link rel="prefetch" href="/assets/2022-02-14-go-design.html.5f8b5fa0.js"><link rel="prefetch" href="/assets/2022-02-14-go-std-lib.html.8da6f73a.js"><link rel="prefetch" href="/assets/2022-02-14-gopl.html.1871018a.js"><link rel="prefetch" href="/assets/2022-02-26-nginx-note.html.2a8a0aea.js"><link rel="prefetch" href="/assets/2022-03-08-markdown-grammar.html.7afb03a3.js"><link rel="prefetch" href="/assets/2022-03-15-system-io.html.eb551ccc.js"><link rel="prefetch" href="/assets/2022-04-26-install-rocket-chat.html.f60212e8.js"><link rel="prefetch" href="/assets/2022-04-27-docker.html.a4099027.js"><link rel="prefetch" href="/assets/2022-04-29-bot-huan.html.4bf51bd9.js"><link rel="prefetch" href="/assets/2022-04-29-gin-note.html.7810ddd8.js"><link rel="prefetch" href="/assets/2022-05-21-obs.html.0f5feb29.js"><link rel="prefetch" href="/assets/2022-05-29-home-vm-ubuntu.html.f0bbaa21.js"><link rel="prefetch" href="/assets/2022-06-01-linux.html.2a8808a3.js"><link rel="prefetch" href="/assets/2022-06-17-frp.html.59df4ff2.js"><link rel="prefetch" href="/assets/2022-06-18-v2ray-server.html.2e303b6a.js"><link rel="prefetch" href="/assets/2022-06-23-jenkins.html.c603526c.js"><link rel="prefetch" href="/assets/2022-06-23-todo.html.1a472243.js"><link rel="prefetch" href="/assets/404.html.4a4ecf9e.js"><link rel="prefetch" href="/assets/index.html.e23b3e9b.js"><link rel="prefetch" href="/assets/index.html.ab4ca95d.js"><link rel="prefetch" href="/assets/index.html.3e9f4221.js"><link rel="prefetch" href="/assets/index.html.708f4c0a.js"><link rel="prefetch" href="/assets/index.html.fd0798c9.js"><link rel="prefetch" href="/assets/index.html.2ecec731.js"><link rel="prefetch" href="/assets/index.html.94dfab0c.js"><link rel="prefetch" href="/assets/index.html.3687b518.js"><link rel="prefetch" href="/assets/index.html.26cca231.js"><link rel="prefetch" href="/assets/index.html.a0fb9706.js"><link rel="prefetch" href="/assets/index.html.fe37703c.js"><link rel="prefetch" href="/assets/index.html.d4f5ee3d.js"><link rel="prefetch" href="/assets/index.html.16a3e0e6.js"><link rel="prefetch" href="/assets/index.html.606c38c4.js"><link rel="prefetch" href="/assets/index.html.1d6e12fc.js"><link rel="prefetch" href="/assets/index.html.5b7f33f7.js"><link rel="prefetch" href="/assets/index.html.43f50f52.js"><link rel="prefetch" href="/assets/index.html.aa4d33d4.js"><link rel="prefetch" href="/assets/index.html.e30587ec.js"><link rel="prefetch" href="/assets/index.html.5612c876.js"><link rel="prefetch" href="/assets/404.d53d63ab.js"><link rel="prefetch" href="/assets/HomePage.e3040f28.js"><link rel="prefetch" href="/assets/Layout.8b86f83e.js"><link rel="prefetch" href="/assets/Links.60b01760.js"><link rel="prefetch" href="/assets/Post.04dce9f3.js"><link rel="prefetch" href="/assets/Tags.56885b70.js"><link rel="prefetch" href="/assets/mermaid.esm.min.bb1c7ac8.js">
    <link rel="stylesheet" href="/assets/style.03f84e94.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container no-sidebar"><!--[--><header class="navbar invert"><span><a href="/" class=""><span class="site-name">$ cd /home/</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="Home"><!--[--><!--]--><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M489.2 287.9h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6V146.2c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6v-32c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6v-32c0-6-8-4.6-11.7-4.6v-38c8.3-2 17.1-3.4 25.7-3.4 10.9 0 20.9 4.3 31.4 4.3 4.6 0 27.7-1.1 27.7-8v-60c0-2.6-2-4.6-4.6-4.6-5.1 0-15.1 4.3-24 4.3-9.7 0-20.9-4.3-32.6-4.3-8 0-16 1.1-23.7 2.9v-4.9c5.4-2.6 9.1-8.3 9.1-14.3 0-20.7-31.4-20.8-31.4 0 0 6 3.7 11.7 9.1 14.3v111.7c-3.7 0-11.7-1.4-11.7 4.6v32h-36.6v-32c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32H128v-32c0-2.6-2-4.6-4.6-4.6H96c-2.6 0-4.6 2-4.6 4.6v178.3H54.8v-32c0-2.6-2-4.6-4.6-4.6H22.8c-2.6 0-4.6 2-4.6 4.6V512h182.9v-96c0-72.6 109.7-72.6 109.7 0v96h182.9V292.5c.1-2.6-1.9-4.6-4.5-4.6zm-288.1-4.5c0 2.6-2 4.6-4.6 4.6h-27.4c-2.6 0-4.6-2-4.6-4.6v-64c0-2.6 2-4.6 4.6-4.6h27.4c2.6 0 4.6 2 4.6 4.6v64zm146.4 0c0 2.6-2 4.6-4.6 4.6h-27.4c-2.6 0-4.6-2-4.6-4.6v-64c0-2.6 2-4.6 4.6-4.6h27.4c2.6 0 4.6 2 4.6 4.6v64z"/></svg></span><span>Home</span><!--[--><!--]--></a></div><div class="navbar-item"><a href="/about/" class="" aria-label="About"><!--[--><!--]--><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M256 224c-79.41 0-192 122.76-192 200.25 0 34.9 26.81 55.75 71.74 55.75 48.84 0 81.09-25.08 120.26-25.08 39.51 0 71.85 25.08 120.26 25.08 44.93 0 71.74-20.85 71.74-55.75C448 346.76 335.41 224 256 224zm-147.28-12.61c-10.4-34.65-42.44-57.09-71.56-50.13-29.12 6.96-44.29 40.69-33.89 75.34 10.4 34.65 42.44 57.09 71.56 50.13 29.12-6.96 44.29-40.69 33.89-75.34zm84.72-20.78c30.94-8.14 46.42-49.94 34.58-93.36s-46.52-72.01-77.46-63.87-46.42 49.94-34.58 93.36c11.84 43.42 46.53 72.02 77.46 63.87zm281.39-29.34c-29.12-6.96-61.15 15.48-71.56 50.13-10.4 34.65 4.77 68.38 33.89 75.34 29.12 6.96 61.15-15.48 71.56-50.13 10.4-34.65-4.77-68.38-33.89-75.34zm-156.27 29.34c30.94 8.14 65.62-20.45 77.46-63.87 11.84-43.42-3.64-85.21-34.58-93.36s-65.62 20.45-77.46 63.87c-11.84 43.42 3.64 85.22 34.58 93.36z"/></svg></span><span>About</span><!--[--><!--]--></a></div><div class="navbar-item"><a href="/tags/" class="" aria-label="Tags"><!--[--><!--]--><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0133.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 010 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"/></svg></span><span>Tags</span><!--[--><!--]--></a></div><div class="navbar-item"><a href="/links/" class="" aria-label="Links"><!--[--><!--]--><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M305.45 462.59c7.391 7.298 6.188 20.097-3 25.004-77.714 41.802-176.726 29.91-242.344-35.709-65.602-65.603-77.51-164.523-35.692-242.331 4.891-9.095 17.69-10.298 25.003-3l116.812 116.813 27.394-27.394c-.688-2.61-1.594-5.001-1.594-7.814a32.004 32.004 0 1132.004 32.005c-2.797 0-5.204-.891-7.798-1.594l-27.41 27.41zm206.526-159.523a16.103 16.103 0 01-16.002 17.003H463.86a15.97 15.97 0 01-15.892-15.002C440.467 175.549 336.453 70.534 207.03 63.533a15.845 15.845 0 01-15.002-15.908V16.027A16.094 16.094 0 01209.03.024C372.255 8.62 503.475 139.841 511.976 303.067zm-96.012-.297a16.21 16.21 0 01-16.112 17.3h-32.207a16.069 16.069 0 01-15.893-14.705c-6.907-77.011-68.118-138.91-144.924-145.224a15.94 15.94 0 01-14.8-15.893v-32.114a16.134 16.134 0 0117.3-16.096c110.123 8.501 198.228 96.607 206.636 206.732z"/></svg></span><span>Links</span><!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://io.alomerry.com" rel="noopener noreferrer" target="_blank" aria-label="IOI"><!--[--><!--]--><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-1.6 -1.6 19.2 19.2" fill="currentColor"><path d="M9.05.435c-.58-.58-1.52-.58-2.1 0L.436 6.95c-.58.58-.58 1.519 0 2.098l6.516 6.516c.58.58 1.519.58 2.098 0l6.516-6.516c.58-.58.58-1.519 0-2.098L9.05.435zM8 .989c.127 0 .253.049.35.145l6.516 6.516a.495.495 0 010 .7L8.35 14.866a.493.493 0 01-.35.145V.989z"/></svg></span><span>IOI</span><!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://portfolio.zxh.io/" rel="noopener noreferrer" target="_blank" aria-label="Portfolio"><!--[--><!--]--><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-1.6 -1.6 19.2 19.2" fill="currentColor"><path fill-rule="evenodd" d="M14.064 0a8.75 8.75 0 00-6.187 2.563l-.459.458c-.314.314-.616.641-.904.979H3.31a1.75 1.75 0 00-1.49.833L.11 7.607a.75.75 0 00.418 1.11l3.102.954c.037.051.079.1.124.145l2.429 2.428c.046.046.094.088.145.125l.954 3.102a.75.75 0 001.11.418l2.774-1.707a1.75 1.75 0 00.833-1.49V9.485c.338-.288.665-.59.979-.904l.458-.459A8.75 8.75 0 0016 1.936V1.75A1.75 1.75 0 0014.25 0h-.186zM10.5 10.625c-.088.06-.177.118-.266.175l-2.35 1.521.548 1.783 1.949-1.2a.25.25 0 00.119-.213v-2.066zM3.678 8.116L5.2 5.766c.058-.09.117-.178.176-.266H3.309a.25.25 0 00-.213.119l-1.2 1.95 1.782.547zm5.26-4.493A7.25 7.25 0 0114.063 1.5h.186a.25.25 0 01.25.25v.186a7.25 7.25 0 01-2.123 5.127l-.459.458a15.21 15.21 0 01-2.499 2.02l-2.317 1.5-2.143-2.143 1.5-2.317a15.25 15.25 0 012.02-2.5l.458-.458h.002zM12 5a1 1 0 11-2 0 1 1 0 012 0zm-8.44 9.56a1.5 1.5 0 10-2.12-2.12c-.734.73-1.047 2.332-1.15 3.003a.23.23 0 00.265.265c.671-.103 2.273-.416 3.005-1.148z"/></svg></span><span>Portfolio</span><!--[--><!--]--></a></div><!--]--><div class="navbar-item"><a style="cursor:pointer;"><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="0 0 24 24" fill="currentColor"><path fill="none" d="M0 0h24v24H0z"/><path d="M11 2c4.968 0 9 4.032 9 9s-4.032 9-9 9-9-4.032-9-9 4.032-9 9-9zm0 16c3.867 0 7-3.133 7-7 0-3.868-3.133-7-7-7-3.868 0-7 3.132-7 7 0 3.867 3.132 7 7 7zm8.485.071l2.829 2.828-1.415 1.415-2.828-2.829 1.414-1.414z"/></svg></span><span>Search</span></a></div></nav><!--[--><!--]--><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="Home"><!--[--><!--]--><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M489.2 287.9h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6V146.2c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6v-32c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6v-32c0-6-8-4.6-11.7-4.6v-38c8.3-2 17.1-3.4 25.7-3.4 10.9 0 20.9 4.3 31.4 4.3 4.6 0 27.7-1.1 27.7-8v-60c0-2.6-2-4.6-4.6-4.6-5.1 0-15.1 4.3-24 4.3-9.7 0-20.9-4.3-32.6-4.3-8 0-16 1.1-23.7 2.9v-4.9c5.4-2.6 9.1-8.3 9.1-14.3 0-20.7-31.4-20.8-31.4 0 0 6 3.7 11.7 9.1 14.3v111.7c-3.7 0-11.7-1.4-11.7 4.6v32h-36.6v-32c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32H128v-32c0-2.6-2-4.6-4.6-4.6H96c-2.6 0-4.6 2-4.6 4.6v178.3H54.8v-32c0-2.6-2-4.6-4.6-4.6H22.8c-2.6 0-4.6 2-4.6 4.6V512h182.9v-96c0-72.6 109.7-72.6 109.7 0v96h182.9V292.5c.1-2.6-1.9-4.6-4.5-4.6zm-288.1-4.5c0 2.6-2 4.6-4.6 4.6h-27.4c-2.6 0-4.6-2-4.6-4.6v-64c0-2.6 2-4.6 4.6-4.6h27.4c2.6 0 4.6 2 4.6 4.6v64zm146.4 0c0 2.6-2 4.6-4.6 4.6h-27.4c-2.6 0-4.6-2-4.6-4.6v-64c0-2.6 2-4.6 4.6-4.6h27.4c2.6 0 4.6 2 4.6 4.6v64z"/></svg></span><span>Home</span><!--[--><!--]--></a></div><div class="navbar-item"><a href="/about/" class="" aria-label="About"><!--[--><!--]--><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M256 224c-79.41 0-192 122.76-192 200.25 0 34.9 26.81 55.75 71.74 55.75 48.84 0 81.09-25.08 120.26-25.08 39.51 0 71.85 25.08 120.26 25.08 44.93 0 71.74-20.85 71.74-55.75C448 346.76 335.41 224 256 224zm-147.28-12.61c-10.4-34.65-42.44-57.09-71.56-50.13-29.12 6.96-44.29 40.69-33.89 75.34 10.4 34.65 42.44 57.09 71.56 50.13 29.12-6.96 44.29-40.69 33.89-75.34zm84.72-20.78c30.94-8.14 46.42-49.94 34.58-93.36s-46.52-72.01-77.46-63.87-46.42 49.94-34.58 93.36c11.84 43.42 46.53 72.02 77.46 63.87zm281.39-29.34c-29.12-6.96-61.15 15.48-71.56 50.13-10.4 34.65 4.77 68.38 33.89 75.34 29.12 6.96 61.15-15.48 71.56-50.13 10.4-34.65-4.77-68.38-33.89-75.34zm-156.27 29.34c30.94 8.14 65.62-20.45 77.46-63.87 11.84-43.42-3.64-85.21-34.58-93.36s-65.62 20.45-77.46 63.87c-11.84 43.42 3.64 85.22 34.58 93.36z"/></svg></span><span>About</span><!--[--><!--]--></a></div><div class="navbar-item"><a href="/tags/" class="" aria-label="Tags"><!--[--><!--]--><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0133.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 010 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"/></svg></span><span>Tags</span><!--[--><!--]--></a></div><div class="navbar-item"><a href="/links/" class="" aria-label="Links"><!--[--><!--]--><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M305.45 462.59c7.391 7.298 6.188 20.097-3 25.004-77.714 41.802-176.726 29.91-242.344-35.709-65.602-65.603-77.51-164.523-35.692-242.331 4.891-9.095 17.69-10.298 25.003-3l116.812 116.813 27.394-27.394c-.688-2.61-1.594-5.001-1.594-7.814a32.004 32.004 0 1132.004 32.005c-2.797 0-5.204-.891-7.798-1.594l-27.41 27.41zm206.526-159.523a16.103 16.103 0 01-16.002 17.003H463.86a15.97 15.97 0 01-15.892-15.002C440.467 175.549 336.453 70.534 207.03 63.533a15.845 15.845 0 01-15.002-15.908V16.027A16.094 16.094 0 01209.03.024C372.255 8.62 503.475 139.841 511.976 303.067zm-96.012-.297a16.21 16.21 0 01-16.112 17.3h-32.207a16.069 16.069 0 01-15.893-14.705c-6.907-77.011-68.118-138.91-144.924-145.224a15.94 15.94 0 01-14.8-15.893v-32.114a16.134 16.134 0 0117.3-16.096c110.123 8.501 198.228 96.607 206.636 206.732z"/></svg></span><span>Links</span><!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://io.alomerry.com" rel="noopener noreferrer" target="_blank" aria-label="IOI"><!--[--><!--]--><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-1.6 -1.6 19.2 19.2" fill="currentColor"><path d="M9.05.435c-.58-.58-1.52-.58-2.1 0L.436 6.95c-.58.58-.58 1.519 0 2.098l6.516 6.516c.58.58 1.519.58 2.098 0l6.516-6.516c.58-.58.58-1.519 0-2.098L9.05.435zM8 .989c.127 0 .253.049.35.145l6.516 6.516a.495.495 0 010 .7L8.35 14.866a.493.493 0 01-.35.145V.989z"/></svg></span><span>IOI</span><!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://portfolio.zxh.io/" rel="noopener noreferrer" target="_blank" aria-label="Portfolio"><!--[--><!--]--><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-1.6 -1.6 19.2 19.2" fill="currentColor"><path fill-rule="evenodd" d="M14.064 0a8.75 8.75 0 00-6.187 2.563l-.459.458c-.314.314-.616.641-.904.979H3.31a1.75 1.75 0 00-1.49.833L.11 7.607a.75.75 0 00.418 1.11l3.102.954c.037.051.079.1.124.145l2.429 2.428c.046.046.094.088.145.125l.954 3.102a.75.75 0 001.11.418l2.774-1.707a1.75 1.75 0 00.833-1.49V9.485c.338-.288.665-.59.979-.904l.458-.459A8.75 8.75 0 0016 1.936V1.75A1.75 1.75 0 0014.25 0h-.186zM10.5 10.625c-.088.06-.177.118-.266.175l-2.35 1.521.548 1.783 1.949-1.2a.25.25 0 00.119-.213v-2.066zM3.678 8.116L5.2 5.766c.058-.09.117-.178.176-.266H3.309a.25.25 0 00-.213.119l-1.2 1.95 1.782.547zm5.26-4.493A7.25 7.25 0 0114.063 1.5h.186a.25.25 0 01.25.25v.186a7.25 7.25 0 01-2.123 5.127l-.459.458a15.21 15.21 0 01-2.499 2.02l-2.317 1.5-2.143-2.143 1.5-2.317a15.25 15.25 0 012.02-2.5l.458-.458h.002zM12 5a1 1 0 11-2 0 1 1 0 012 0zm-8.44 9.56a1.5 1.5 0 10-2.12-2.12c-.734.73-1.047 2.332-1.15 3.003a.23.23 0 00.265.265c.671-.103 2.273-.416 3.005-1.148z"/></svg></span><span>Portfolio</span><!--[--><!--]--></a></div><!--]--><div class="navbar-item"><a style="cursor:pointer;"><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="0 0 24 24" fill="currentColor"><path fill="none" d="M0 0h24v24H0z"/><path d="M11 2c4.968 0 9 4.032 9 9s-4.032 9-9 9-9-4.032-9-9 4.032-9 9-9zm0 16c3.867 0 7-3.133 7-7 0-3.868-3.133-7-7-7-3.868 0-7 3.132-7 7 0 3.867 3.132 7 7 7zm8.485.071l2.829 2.828-1.415 1.415-2.828-2.829 1.414-1.414z"/></svg></span><span>Search</span></a></div></nav><!--[--><!--]--><!----><!--[--><!--]--></aside><!--]--><div class="page-content"><!--[--><div class="show-catalog post-wrapper"><div class="article-header post-header" style=""><!----><div class="article-header-content"><div class="article-tags"><!--[--><span class="article-tag">Y2020</span><span class="article-tag">Redis</span><!--]--></div><h1 class="article-title">Redis Note</h1><!----><div class="article-icons"><div class="article-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-75.52 -43.52 599.04 599.04" fill="currentColor"><path d="M313.6 304c-28.7 0-42.5 16-89.6 16-47.1 0-60.8-16-89.6-16C60.2 304 0 364.2 0 438.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-25.6c0-74.2-60.2-134.4-134.4-134.4zM400 464H48v-25.6c0-47.6 38.8-86.4 86.4-86.4 14.6 0 38.3 16 89.6 16 51.7 0 74.9-16 89.6-16 47.6 0 86.4 38.8 86.4 86.4V464zM224 288c79.5 0 144-64.5 144-144S303.5 0 224 0 80 64.5 80 144s64.5 144 144 144zm0-240c52.9 0 96 43.1 96 96s-43.1 96-96 96-96-43.1-96-96 43.1-96 96-96z"/></svg><span>Alomerry Wu</span></div><div class="article-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-75.52 -43.52 599.04 599.04" fill="currentColor"><path d="M400 64h-48V12c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v52H160V12c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v52H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zm-6 400H54c-3.3 0-6-2.7-6-6V160h352v298c0 3.3-2.7 6-6 6z"/></svg><span>2020-07-06</span></div><div class="article-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="0 0 24 24" fill="currentColor"><path fill="none" d="M0 0h24v24H0z"/><path d="M17.618 5.968l1.453-1.453 1.414 1.414-1.453 1.453a9 9 0 11-1.414-1.414zM12 20a7 7 0 100-14 7 7 0 000 14zM11 8h2v6h-2V8zM8 1h8v2H8V1z"/></svg><span>20 min</span></div></div></div><!----></div><main class="page post-content"><!--[--><!--]--><div class="theme-gungnir-content"><!--[--><!--]--><div><h2 id="redis-知识点" tabindex="-1"><a class="header-anchor" href="#redis-知识点" aria-hidden="true">#</a> Redis 知识点</h2><h3 id="前置" tabindex="-1"><a class="header-anchor" href="#前置" aria-hidden="true">#</a> 前置</h3><ul><li>关系型数据库建表需要给出 schema、类型、字节宽度等。倾向于行级存储</li><li>数据库表很大时，性能是否下降？（表有索引） <ul><li>增删改变慢</li><li>少量查询不会变慢，并发大时会受到硬盘带宽影响速度</li></ul></li></ul><h3 id="安装" tabindex="-1"><a class="header-anchor" href="#安装" aria-hidden="true">#</a> 安装</h3><ul><li>下载、编译安装 make install PREFIX=/opt/alomerry/redis</li><li>使用 utils/install_server.sh 安装服务，设置自启动</li></ul><h3 id="epoll" tabindex="-1"><a class="header-anchor" href="#epoll" aria-hidden="true">#</a> epoll</h3><ul><li>早起 BIO 流程</li><li>NIO（多路复用 ）、AIO 同步非租塞、</li><li>select、read、epoll、mmap</li></ul><h3 id="redis-应用场景" tabindex="-1"><a class="header-anchor" href="#redis-应用场景" aria-hidden="true">#</a> Redis 应用场景</h3><ul><li>五大 value 类型</li><li>缓存</li><li>为了服务无状态，延伸思考，项目中哪些数据结构或对象，在单机里需要单机锁，在多机里需要分布式锁</li><li>无锁化</li></ul><h3 id="set、zset-分别用于哪些场景" tabindex="-1"><a class="header-anchor" href="#set、zset-分别用于哪些场景" aria-hidden="true">#</a> Set、ZSet 分别用于哪些场景</h3><h3 id="redis-单线程-多线程" tabindex="-1"><a class="header-anchor" href="#redis-单线程-多线程" aria-hidden="true">#</a> Redis 单线程/多线程</h3><ul><li>无论什么版本，工作线程都是一个</li><li>6.x 版本后出现了 IO 多线程</li><li>[ Todo 学习一下系统 IO ] 理解面向 IO 模型编程时，有内核的事，从内核把数据运到程序里是第一步，搬运回来的数据做计算是第二步。（example: netty）</li></ul><h3 id="redis-存在线程安全问题吗-为什么" tabindex="-1"><a class="header-anchor" href="#redis-存在线程安全问题吗-为什么" aria-hidden="true">#</a> Redis 存在线程安全问题吗？为什么</h3><h3 id="遇到过缓存穿透吗-描述" tabindex="-1"><a class="header-anchor" href="#遇到过缓存穿透吗-描述" aria-hidden="true">#</a> 遇到过缓存穿透吗？描述</h3><h3 id="遇到过缓存击穿吗-描述" tabindex="-1"><a class="header-anchor" href="#遇到过缓存击穿吗-描述" aria-hidden="true">#</a> 遇到过缓存击穿吗？描述</h3><h3 id="如何避免缓存雪崩" tabindex="-1"><a class="header-anchor" href="#如何避免缓存雪崩" aria-hidden="true">#</a> 如何避免缓存雪崩？</h3><h3 id="缓存是如何回收的" tabindex="-1"><a class="header-anchor" href="#缓存是如何回收的" aria-hidden="true">#</a> 缓存是如何回收的？</h3><h3 id="缓存是如何预热的" tabindex="-1"><a class="header-anchor" href="#缓存是如何预热的" aria-hidden="true">#</a> 缓存是如何预热的？</h3><h3 id="数据库与缓存不一致如何解决" tabindex="-1"><a class="header-anchor" href="#数据库与缓存不一致如何解决" aria-hidden="true">#</a> 数据库与缓存不一致如何解决</h3><h2 id="homework" tabindex="-1"><a class="header-anchor" href="#homework" aria-hidden="true">#</a> Homework</h2><ul><li>写出下面的 Redis 命令 <ul><li>Redis 中插入十条 student{id, name, age} 的数据。</li><li>Redis 中记录 student 的投票次数，并执行加 1 和加 3 的操作。</li></ul></li><li>使用后端框架操作 Redis 实现下面的功能 <ul><li>Redis 中插入十条 student{id, name, age} 的数据。其中 student 需要定义成 model，id、name、age 都需要随机生成。</li><li>Redis 中记录 student 的投票次数(初始值随机生成)，并按从低到高的顺序取出来。</li></ul></li></ul><p>使用 Redis 命令代码：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> sadd studentIds <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span> <span class="token number">5</span> <span class="token number">6</span> <span class="token number">7</span> <span class="token number">8</span> <span class="token number">9</span> <span class="token number">10</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">10</span>
<span class="token operator">&gt;</span> hmset studentInfos <span class="token number">1</span> <span class="token string">&quot;{name:&#39;a&#39;,age:18}&quot;</span> <span class="token number">2</span> <span class="token string">&quot;{name:&#39;b&#39;,age:18}&quot;</span> <span class="token number">3</span> <span class="token string">&quot;{name:&#39;c&#39;,age:18}&quot;</span> <span class="token number">4</span> <span class="token string">&quot;{name:&#39;d&#39;,age:18}&quot;</span> <span class="token number">5</span> <span class="token string">&quot;{name:&#39;e&#39;,age:18}&quot;</span> <span class="token number">6</span> <span class="token string">&quot;{name:&#39;f&#39;,age:18}&quot;</span> <span class="token number">7</span> <span class="token string">&quot;{name:&#39;g&#39;,age:18}&quot;</span> <span class="token number">8</span> <span class="token string">&quot;{name:&#39;h&#39;,age:18}&quot;</span> <span class="token number">9</span> <span class="token string">&quot;{name:&#39;i&#39;,age:18}&quot;</span> <span class="token number">10</span> <span class="token string">&quot;{name:&#39;j&#39;,age:18}&quot;</span> 
OK
<span class="token operator">&gt;</span> hmset studentVote <span class="token number">1</span> <span class="token number">0</span> <span class="token number">2</span> <span class="token number">0</span> <span class="token number">3</span> <span class="token number">0</span> <span class="token number">4</span> <span class="token number">0</span> <span class="token number">5</span> <span class="token number">0</span> <span class="token number">6</span> <span class="token number">0</span> <span class="token number">7</span> <span class="token number">0</span> <span class="token number">8</span> <span class="token number">0</span> <span class="token number">9</span> <span class="token number">0</span> <span class="token number">10</span> <span class="token number">0</span>
OK
<span class="token operator">&gt;</span> hincrby studentVote <span class="token number">1</span> <span class="token number">1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token operator">&gt;</span> hincrby studentVote <span class="token number">2</span> <span class="token number">3</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token operator">&gt;</span> hincrby studentVote <span class="token number">3</span> <span class="token number">1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token operator">&gt;</span> hincrby studentVote <span class="token number">4</span> <span class="token number">3</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token operator">&gt;</span> hincrby studentVote <span class="token number">5</span> <span class="token number">1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token operator">&gt;</span> hincrby studentVote <span class="token number">6</span> <span class="token number">3</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token operator">&gt;</span> hincrby studentVote <span class="token number">7</span> <span class="token number">1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token operator">&gt;</span> hincrby studentVote <span class="token number">8</span> <span class="token number">3</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token operator">&gt;</span> hincrby studentVote <span class="token number">9</span> <span class="token number">1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token operator">&gt;</span> hincrby studentVote <span class="token number">10</span> <span class="token number">3</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token operator">&gt;</span> smembers studentIds
 <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;1&quot;</span>
 <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;2&quot;</span>
 <span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;3&quot;</span>
 <span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;4&quot;</span>
 <span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">&quot;5&quot;</span>
 <span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">&quot;6&quot;</span>
 <span class="token number">7</span><span class="token punctuation">)</span> <span class="token string">&quot;7&quot;</span>
 <span class="token number">8</span><span class="token punctuation">)</span> <span class="token string">&quot;8&quot;</span>
 <span class="token number">9</span><span class="token punctuation">)</span> <span class="token string">&quot;9&quot;</span>
<span class="token number">10</span><span class="token punctuation">)</span> <span class="token string">&quot;10&quot;</span>
<span class="token operator">&gt;</span> hgetall studentInfos
 <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;1&quot;</span>
 <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;{name:&#39;a&#39;,age:18}&quot;</span>
 <span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;2&quot;</span>
 <span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;{name:&#39;b&#39;,age:18}&quot;</span>
 <span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">&quot;3&quot;</span>
 <span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">&quot;{name:&#39;c&#39;,age:18}&quot;</span>
 <span class="token number">7</span><span class="token punctuation">)</span> <span class="token string">&quot;4&quot;</span>
 <span class="token number">8</span><span class="token punctuation">)</span> <span class="token string">&quot;{name:&#39;d&#39;,age:18}&quot;</span>
 <span class="token number">9</span><span class="token punctuation">)</span> <span class="token string">&quot;5&quot;</span>
<span class="token number">10</span><span class="token punctuation">)</span> <span class="token string">&quot;{name:&#39;e&#39;,age:18}&quot;</span>
<span class="token number">11</span><span class="token punctuation">)</span> <span class="token string">&quot;6&quot;</span>
<span class="token number">12</span><span class="token punctuation">)</span> <span class="token string">&quot;{name:&#39;f&#39;,age:18}&quot;</span>
<span class="token number">13</span><span class="token punctuation">)</span> <span class="token string">&quot;7&quot;</span>
<span class="token number">14</span><span class="token punctuation">)</span> <span class="token string">&quot;{name:&#39;g&#39;,age:18}&quot;</span>
<span class="token number">15</span><span class="token punctuation">)</span> <span class="token string">&quot;8&quot;</span>
<span class="token number">16</span><span class="token punctuation">)</span> <span class="token string">&quot;{name:&#39;h&#39;,age:18}&quot;</span>
<span class="token number">17</span><span class="token punctuation">)</span> <span class="token string">&quot;9&quot;</span>
<span class="token number">18</span><span class="token punctuation">)</span> <span class="token string">&quot;{name:&#39;i&#39;,age:18}&quot;</span>
<span class="token number">19</span><span class="token punctuation">)</span> <span class="token string">&quot;10&quot;</span>
<span class="token number">20</span><span class="token punctuation">)</span> <span class="token string">&quot;{name:&#39;j&#39;,age:18}&quot;</span>
<span class="token operator">&gt;</span> hgetall studentVote
 <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;1&quot;</span>
 <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;1&quot;</span>
 <span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;2&quot;</span>
 <span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;3&quot;</span>
 <span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">&quot;3&quot;</span>
 <span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">&quot;1&quot;</span>
 <span class="token number">7</span><span class="token punctuation">)</span> <span class="token string">&quot;4&quot;</span>
 <span class="token number">8</span><span class="token punctuation">)</span> <span class="token string">&quot;3&quot;</span>
 <span class="token number">9</span><span class="token punctuation">)</span> <span class="token string">&quot;5&quot;</span>
<span class="token number">10</span><span class="token punctuation">)</span> <span class="token string">&quot;1&quot;</span>
<span class="token number">11</span><span class="token punctuation">)</span> <span class="token string">&quot;6&quot;</span>
<span class="token number">12</span><span class="token punctuation">)</span> <span class="token string">&quot;3&quot;</span>
<span class="token number">13</span><span class="token punctuation">)</span> <span class="token string">&quot;7&quot;</span>
<span class="token number">14</span><span class="token punctuation">)</span> <span class="token string">&quot;1&quot;</span>
<span class="token number">15</span><span class="token punctuation">)</span> <span class="token string">&quot;8&quot;</span>
<span class="token number">16</span><span class="token punctuation">)</span> <span class="token string">&quot;3&quot;</span>
<span class="token number">17</span><span class="token punctuation">)</span> <span class="token string">&quot;9&quot;</span>
<span class="token number">18</span><span class="token punctuation">)</span> <span class="token string">&quot;1&quot;</span>
<span class="token number">19</span><span class="token punctuation">)</span> <span class="token string">&quot;10&quot;</span>
<span class="token number">20</span><span class="token punctuation">)</span> <span class="token string">&quot;3&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="五种数据结构" tabindex="-1"><a class="header-anchor" href="#五种数据结构" aria-hidden="true">#</a> 五种数据结构</h2><h3 id="字符串" tabindex="-1"><a class="header-anchor" href="#字符串" aria-hidden="true">#</a> 字符串</h3><p>常用命令</p><p>set key value 设置指定 key 的值，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; set mo 14
OK
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>get key 获取指定 key 的值，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; getset mo 16
&quot;14&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>getrange key start end 返回 key 中字符串的子字符串，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; set mo &quot;314dsafdaga&quot;
OK                                  
&gt; getrange mo 0 7
&quot;314dsafd&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>getset key value 将指定 key 的值设置为 value，并返回 key 的旧值，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; getset mo 1
&quot;314dsafdaga&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>mset key value [key value] 设置一个或多个 key-value 对，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; mset mo 12 de 12
OK
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>mget key1 [key2] 获取一个或多个 key 的值，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; mget mo de
1) &quot;12&quot;
2) &quot;12&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>setnx key value 只有 key 不存在时才会设置 value，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; setnx mo 10
(integer) 0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>strlen key 返回 key 所储存的字符串值的长度，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; strlen mo
(integer) 1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>msetnx key value [key value] 给一个或多个 key 设置 value，当且仅当所有 key 都不存在时，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; msetnx mo 100
(integer) 0
&gt; del mo
(integer) 1
&gt; msetnx mo 100 de 12
(integer) 1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>incr key 将 key 中存储的数字值增加 1，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; incr mo
(integer) 101
&gt; set mo &quot;1a&quot;
OK
&gt; incr mo
(error) ERR value is not an integer or out of range
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>incrby key increment 将 key 中的数字值增加 increment，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; set mo 11
OK
&gt; incrby mo 100
(integer) 111
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>append key value 在指定 key 的值后追加 value，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; set mo a
OK
&gt; append mo 12
(integer) 3
&gt; get mo
&quot;a12&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>incrbyfloat key decrement 将 key 所储存的值加上给定的浮点值，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; set mo 1.3
OK
&gt; INCRBYFLOAT mo 1.2
&quot;2.5&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>setex key seconds value 将 key 的值设为 value ，并将 key 的过期时间设为 seconds（单位：秒），执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; setex mo 15 12
OK
&gt; get mo
&quot;12&quot;
&gt; get mo
(nil)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>psetex key milliseconds value 将值 key 的值设为 value ，并将 key 的过期时间设为 seconds（单位：毫秒）。</p><h3 id="哈希" tabindex="-1"><a class="header-anchor" href="#哈希" aria-hidden="true">#</a> 哈希</h3><p>常用命令</p><p>hset key field value 将指定 key 的 field 属性设置为 value，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; hset mo age 15
(integer) 1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>hget key field 获取指定 key 的 field 字段值，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; hget mo age
&quot;15&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>hsetnx key field value 将指定 key 的 field 属性设置为 value，仅当 field 不存在时，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; hsetnx mo age 16
(integer) 0
&gt; hsetnx mo year 1997
(integer) 1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>hmget key field1 [field2] 获取指定 key 的一个或多个属性，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; hmget mo year age
1) &quot;2007&quot;
2) &quot;16.1&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>hexists key field 检查指定 key 是否包含指定 field，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; hexists mo age
(integer) 1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>hgetall key 获取指定 key 的所有字段和值，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; hgetall mo
1) &quot;age&quot;
2) &quot;15&quot;
3) &quot;year&quot;
4) &quot;1997&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>hincrby key field increment 给指定 key 的指定字段增加一个整数值 increment，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; hincrby mo year 10
(integer) 2007
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>hkeys key 获取指定 key 的所有属性，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; hkeys mo
1) &quot;age&quot;
2) &quot;year&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>hlen key 获取指定 key 的属性数量，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; hlen mo
(integer) 2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>hvals key 获取指定 key 的所有属性值，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; hvals mo
1) &quot;16.1&quot;
2) &quot;2007&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>hincrbyfloat key field increment 将指定 key 的 field 属性增加一个浮点值 increment，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; hincrbyfloat mo age 1.1
&quot;16.1&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>hdel key field [field2] 删除指定 key 的一个或多个属性，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; hdel mo age year
(integer) 2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="列表" tabindex="-1"><a class="header-anchor" href="#列表" aria-hidden="true">#</a> 列表</h3><p>常用命令</p><p>lpush key value1 [value2] 将一个或多个值放入指定列表中，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; lpush mo 1 2 3
(integer) 3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>rpop key</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; rpop mo
&quot;1&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>blpop key1 [key2] timeout 从列表头部弹出一个元素，并返回该元素的值，如果列表为空会阻塞至可弹出元素或超出时间为止，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; blpop mo 10
1) &quot;mo&quot;
2) &quot;2&quot;
&gt; blpop mo 10
(nil)
(10.09s)
&gt; blpop mo 10
1) &quot;mo&quot;
2) &quot;1&quot;
(7.90s)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>brpop key1 [key2] timeout 从列表尾部弹出一个元素，并返回该元素的值，如果列表为空会阻塞至可弹出元素或超出时间为止，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; lpush cv 12
(integer) 1
&gt; llen mo
(integer) 0
&gt; blpop mo cv 3
1) &quot;cv&quot;
2) &quot;12&quot;
&gt; blpop mo cv 3
(nil)
(3.04s)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>brpoplpush source destination timeout 从 source 列表的尾部弹出元素放置到 destination 列表的头部，如果 source 列表为空会阻塞至可弹出元素或超出时间为止，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; brpoplpush mo cv 3
&quot;1&quot;
&gt; brpoplpush mo cv 3
&quot;2&quot;
&gt; brpoplpush mo cv 3
&quot;3&quot;
&gt; brpoplpush mo cv 3
(nil)
(3.02s)
&gt; brpoplpush mo cv 10
&quot;15&quot;
(4.85s)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>llen key 获取列表长度，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>llen key
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>lpop key 从列表头部弹出元素，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; lpush mo 16 18
(integer) 2
&gt; lpop mo
&quot;18&quot;
&gt; lpop mo
&quot;16&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>lindex key index 获取列表指定位置的元素，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; lpush mo 16 18
(integer) 2
&gt; lindex mo 0
&quot;18&quot;
&gt; lindex mo 1
&quot;16&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>linsert key before|after pivot value 在列表的 pivot 的前或后插入元素，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; linsert mo before 18 -1
(integer) 3
&gt; lindex mo 0
&quot;-1&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>lpushx key value 将元素插入已存在的列表头部，不存在时无法插入，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; lpushx mo 15
(integer) 4
&gt; lpushx a 15
(integer) 0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>lrange key start stop 获取指定范围内的列表元素，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; lrange mo 0 10
1) &quot;15&quot;
2) &quot;-1&quot;
3) &quot;18&quot;
4) &quot;16&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>lrem key count value 从列表中删除和 value 相同的值，count 的值可以是以下几种：</p><ul><li>count &gt; 0 从头部向尾部搜索，删除 count 个与 value 相同值的元素。</li><li>count &lt; 0 从尾部向头部搜索，删除 count 的绝对值个与 value 相同值的元素。</li><li>count = 0 移除列表中全部的与 value 相同值的元素。</li></ul><p>执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; lpush mo a b a b a a c c f e g m m m m d
(integer) 16
&gt; lrem mo -2 a
(integer) 2
&gt; lrange mo 0 20
 1) &quot;d&quot;
 2) &quot;m&quot;
 3) &quot;m&quot;
 4) &quot;m&quot;
 5) &quot;m&quot;
 6) &quot;g&quot;
 7) &quot;e&quot;
 8) &quot;f&quot;
 9) &quot;c&quot;
10) &quot;c&quot;
11) &quot;a&quot;
12) &quot;a&quot;
13) &quot;b&quot;
14) &quot;b&quot;
&gt; lrem mo 2 m
(integer) 2
&gt; lrange mo 0 20
 1) &quot;d&quot;
 2) &quot;m&quot;
 3) &quot;m&quot;
 4) &quot;g&quot;
 5) &quot;e&quot;
 6) &quot;f&quot;
 7) &quot;c&quot;
 8) &quot;c&quot;
 9) &quot;a&quot;
10) &quot;a&quot;
11) &quot;b&quot;
12) &quot;b&quot;
&gt; lrem mo 0 a
(integer) 2
&gt; lrange mo 0 20
 1) &quot;d&quot;
 2) &quot;m&quot;
 3) &quot;m&quot;
 4) &quot;g&quot;
 5) &quot;e&quot;
 6) &quot;f&quot;
 7) &quot;c&quot;
 8) &quot;c&quot;
 9) &quot;b&quot;
10) &quot;b&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>lset key index value 通过索引修改指定列表的元素值，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; lset mo 0 hello
OK
&gt; lrange mo 0 0
1) &quot;hello&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ltrim key start stop 将指定列表从 start 到 stop 进行修剪，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; lrange mo 0 20
 1) &quot;hello&quot;
 2) &quot;m&quot;
 3) &quot;m&quot;
 4) &quot;g&quot;
 5) &quot;e&quot;
 6) &quot;f&quot;
 7) &quot;c&quot;
 8) &quot;c&quot;
 9) &quot;b&quot;
10) &quot;b&quot;
&gt; ltrim mo 3 5
OK
&gt; lrange mo 0 20
1) &quot;g&quot;
2) &quot;e&quot;
3) &quot;f&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>rpoplpush source destination 将 source 列表的尾元素移出放置到 destination 列表的头部中。</p><p>rpush key value1 [value2] 向列表的尾部添加多个元素。</p><p>rpushx key value 在存在的列表的尾部添加元素。</p><h3 id="集合" tabindex="-1"><a class="header-anchor" href="#集合" aria-hidden="true">#</a> 集合</h3><p>常用命令</p><p>sadd key member1 [member2] 向集合中添加一个或多个元素，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; sadd mo 1 2 3
(integer) 3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>scard key 获取集合中的元素数量，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; scard mo
(integer) 3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>sdiff key1 [key2] 返回两个集合的差集，差集为 key1 集合的子集，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; sadd mo 1 2 3
(integer) 3
&gt; sadd cv 2 3 9
(integer) 3
&gt; sdiff cv mo
1) &quot;9&quot;
&gt; sdiff mo cv
1) &quot;1&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>sdiffstore destination key1 [key2] 将给定集合的差集存储在集合 destination 中，如果 destination 中已有数据，则会被覆盖，差集为 key1 的子集，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; sdiffstore tmp cv mo
(integer) 1
&gt; sadd uv 9 5 7
(integer) 3
&gt; sdiffstore tmp cv mo uv
(integer) 0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>sismember key member 判断 member 是否在集合中，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; sismember mo 9
(integer) 0
&gt; sismember mo 2
(integer) 1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>smembers key 获取集合中的元素，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; smembers mo
1) &quot;1&quot;
2) &quot;2&quot;
3) &quot;3&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>smove source destination member 将 member 元素从 source 集合移动到 destination 集合中，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; smove mo cv 2
(integer) 1
&gt; smembers cv
1) &quot;2&quot;
&gt; smembers mo
1) &quot;1&quot;
2) &quot;3&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>spop key 移除并返回集合中的一个随机元素，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; spop mo
&quot;1&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>srandmember key [count] 返回集合中一个或多个随机元素，count 的值可以是如下：</p><ul><li>count 为正数且小于集合容量，返回一个包含 count 个元素的数组。</li><li>count 为正数且大于等于集合容量，返回包含集合全部元素的数组。</li><li>count 为负数，返回一个容量为 count 绝对值的数组，且元素可能重复。</li></ul><p>执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; smembers mo
1) &quot;1&quot;
2) &quot;3&quot;
3) &quot;4&quot;
4) &quot;24&quot;
&gt; SRANDMEMBER mo 3
1) &quot;1&quot;
2) &quot;4&quot;
3) &quot;24&quot;
&gt; SRANDMEMBER mo 11
1) &quot;1&quot;
2) &quot;3&quot;
3) &quot;4&quot;
4) &quot;24&quot;
&gt; SRANDMEMBER mo -3
1) &quot;1&quot;
2) &quot;4&quot;
3) &quot;1&quot;
&gt; SRANDMEMBER mo -7
1) &quot;4&quot;
2) &quot;4&quot;
3) &quot;1&quot;
4) &quot;24&quot;
5) &quot;24&quot;
6) &quot;4&quot;
7) &quot;3&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>srem key member1 [member2] 移除集合中的一个或多个元素，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; srem mo 4 1 24
(integer) 3
&gt; smembers mo
1) &quot;3&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>sunion key1 [key2] 返回给定集合的并集，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; smembers mo
1) &quot;3&quot;
&gt; sadd cv 1 9 43 3
(integer) 4
&gt; sunion cv mo
1) &quot;1&quot;
2) &quot;3&quot;
3) &quot;9&quot;
4) &quot;43&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>sunionstore destination key1 [key2] 将给定集合的并集保存至 destination 集合中，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; sunionstore tmp cv mo
(integer) 4
&gt; smembers tmp
1) &quot;1&quot;
2) &quot;3&quot;
3) &quot;9&quot;
4) &quot;43&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="有序集合" tabindex="-1"><a class="header-anchor" href="#有序集合" aria-hidden="true">#</a> 有序集合</h3><p>常用命令</p><p>zadd key score1 member1 [score2 member2] 向有序集合添加一个或多个成员，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; zadd mo 1.1 a 12 b
(integer) 2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>zcard key 获取有序集合的成员数，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; zcard mo
(integer) 2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>zcount key min max 获取有序集合中指定分数间的成员数，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; zcount mo 0 2
(integer) 1
&gt; zcount mo 2 20
(integer) 1
&gt; zcount mo 0 20
(integer) 2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>zincrby key increment member 将有序集合中指定成员的分数增加 increment，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; zincrby mo 2.8 a
&quot;3.8999999999999999&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>zscore key member 返回有序集合中 member 的分数，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; zscore mo b
&quot;12&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>zrevrank key member 返回有序集合中 member 的排名（分数由高到低），执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; zrevrank mo b
(integer) 0
&gt; zrevrank mo a
(integer) 1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>zrank key member 返回有序集合中 member 的排名（分数由低到高），执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; zrank mo a
(integer) 0
&gt; zrank mo b
(integer) 1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>zrem key member [member] 移除有序集合中一个或多个元素，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; zrem mo a b
(integer) 2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>zlexcount key min max 返回分数相同时指定字典序区间的成员数，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; zadd mo 0 a 0 b 0 c 0 d 0 e
(integer) 5
&gt; zlexcount mo - +
(integer) 5
&gt; zlexcount mo [a (e
(integer) 4
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>zrangebyscore key min max [withscores] [limit offset count] 返回指定分数范围内的有序集合元素，按分数从小到大排序，添加 <code>withscores</code> 参数使结果包含分数，<code>limit</code> 可以获取指定区间的结果，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; zrangebyscore mo -inf +inf withscores limit 1 2
1) &quot;4&quot;
2) &quot;3.3999999999999999&quot;
3) &quot;2&quot;
4) &quot;13&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>zrevrangebyscore key max min [withscores] 返回指定分数范围内的有序集合元素，按分数从大到小排序，分数一致时按字典序逆序排序，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; zrevrangebyscore mo +inf -inf withscores
 1) &quot;f&quot;
 2) &quot;54&quot;
 3) &quot;m&quot;
 4) &quot;11&quot;
 5) &quot;e&quot;
 6) &quot;0&quot;
 7) &quot;d&quot;
 8) &quot;0&quot;
 9) &quot;c&quot;
10) &quot;0&quot;
11) &quot;b&quot;
12) &quot;0&quot;
13) &quot;a&quot;
14) &quot;0&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>zremrangebylex key min max 移除有序集合中给定的字典区间的所有成员，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; zremrangebylex mo (a [b
(integer) 1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>zremrangebyrank key start stop 移除有序集合中给定的排名区间的所有成员，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; zremrangebyrank mo 0 1
(integer) 2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>zremrangebyscore key min max 移除有序集合中给定的分数区间的所有成员，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; zremrangebyscore mo 10 11
(integer) 1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>zunionstore destination numkeys key [key] 计算给定的一个或多个有序集的并集，并保存到 destination 中，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; zunionstore tmp 2 mo cv
(integer) 4
&gt; zrange tmp 0 20 withscores
1) &quot;b&quot;
2) &quot;2&quot;
3) &quot;a&quot;
4) &quot;4&quot;
5) &quot;c&quot;
6) &quot;7&quot;
7) &quot;m&quot;
8) &quot;18&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>zinterstore destination numkeys key [key] 计算给定的一个或多个有序集的交集，并保存到 destination 中，执行代码如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; zadd mo 1 a 2 b 3 c
(integer) 3
&gt; zadd cv 3 a 18 m 4 c
(integer) 3
&gt; zinterstore tmp 2 mo cv
(integer) 2
&gt; zrange tmp 0 20 withscores
1) &quot;a&quot;
2) &quot;4&quot;
3) &quot;c&quot;
4) &quot;7&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="订阅、事务、管道技术" tabindex="-1"><a class="header-anchor" href="#订阅、事务、管道技术" aria-hidden="true">#</a> 订阅、事务、管道技术</h2><h3 id="发布-订阅模式" tabindex="-1"><a class="header-anchor" href="#发布-订阅模式" aria-hidden="true">#</a> 发布/订阅模式</h3><p>发布者可以在频道发布消息，订阅者可以在频道接受到消息。</p><p>发布者测试代码：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; PUBLISH chat hello
(integer) 1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>订阅者测试代码：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; SUBSCRIBE chat 
Reading messages... (press Ctrl-C to quit)
1) &quot;subscribe&quot;
2) &quot;chat&quot;
3) (integer) 1
1) &quot;message&quot;
2) &quot;chat&quot;
3) &quot;hello&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="事务" tabindex="-1"><a class="header-anchor" href="#事务" aria-hidden="true">#</a> 事务</h3><p>Redis 的事务可以理解为一个打包批量执行脚本，整个批量指令并非原子操作，中间的指令的失败不会导致前面的指令回滚或是后面指令的终止。</p><p>一个事务从开始到执行会经历三个阶段：</p><ul><li>开始事务</li><li>命令入队</li><li>执行事务</li></ul><p>Redis 事务带有三个重要保证：</p><ul><li>批量操作在发送 EXEC 命令前被放入队列缓存。</li><li>收到 EXEC 命令后进入事务执行，事务中命令执行失败，后续指令继续执行。</li><li>事务执行过程中，其他客户端提交的命令不会插入到事务执行命令序列中。</li></ul><p>事务测试代码：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; multi
OK
&gt; set mo &quot;alomerry&quot;
QUEUED
&gt; hset mo name &quot;alomerry&quot;
QUEUED
&gt; get mo
QUEUED
&gt; exec
1) OK
2) (error) WRONGTYPE Operation against a key holding the wrong kind of value
3) &quot;alomerry&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以看到设置了 key 为 mo 的字符串后，又设置为了哈希，此时发生了错误，但是没有影响第三条指令读取字符串内容。</p><h3 id="管道" tabindex="-1"><a class="header-anchor" href="#管道" aria-hidden="true">#</a> 管道</h3><p>管道通过将多次请求打包，减小客户端与 Redis 的通讯次数来实现降低往返的延时时间。管道原理是队列，可以保证数据的顺序性。如下程序可以对比发现使用管道时消耗的总时间更少：</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">withPipline</span><span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">,</span> c redis<span class="token punctuation">.</span>Conn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	start <span class="token operator">:=</span> time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	c<span class="token punctuation">.</span><span class="token function">Send</span><span class="token punctuation">(</span><span class="token string">&quot;MULTI&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		c<span class="token punctuation">.</span><span class="token function">Send</span><span class="token punctuation">(</span><span class="token string">&quot;set&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;tmp&quot;</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	c<span class="token punctuation">.</span><span class="token function">Do</span><span class="token punctuation">(</span><span class="token string">&quot;EXEC&quot;</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span><span class="token function">Since</span><span class="token punctuation">(</span>start<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">withOutPipline</span><span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">,</span> c redis<span class="token punctuation">.</span>Conn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	start <span class="token operator">:=</span> time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		c<span class="token punctuation">.</span><span class="token function">Do</span><span class="token punctuation">(</span><span class="token string">&quot;set&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;tmp&quot;</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span><span class="token function">Since</span><span class="token punctuation">(</span>start<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>程序输出结果：</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token number">20</span><span class="token punctuation">.</span>746117ms
<span class="token number">935.685</span>µs
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"/></svg><a class="external-link meta-item-label" href="https://github.com/Alomerry/blog/edit/master/blog/posts/2020-07-06-redis-note.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page on GitHub"><!--[--><!--]--><!----><span>Edit this page on GitHub</span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><!----></footer><!----><!--[--><div class="pager"><a href="/posts/2020-02-14-deploy-ssr-server.html" class="previous">Previous<br><span>搭建 S?R 教程</span></a><a href="/posts/2020-07-06-js-make-apple-calculator.html" class="next">Next<br><span>前端作业-计算器</span></a></div><!--]--><!----></main><ul class="catalog" style="top:0px;"><li class="level-2 toc-link-redis-知识点">Redis 知识点</li><li class="level-3 toc-link-前置">前置</li><li class="level-3 toc-link-安装">安装</li><li class="level-3 toc-link-epoll">epoll</li><li class="level-3 toc-link-redis-应用场景">Redis 应用场景</li><li class="level-3 toc-link-set、zset-分别用于哪些场景">Set、ZSet 分别用于哪些场景</li><li class="level-3 toc-link-redis-单线程-多线程">Redis 单线程/多线程</li><li class="level-3 toc-link-redis-存在线程安全问题吗-为什么">Redis 存在线程安全问题吗？为什么</li><li class="level-3 toc-link-遇到过缓存穿透吗-描述">遇到过缓存穿透吗？描述</li><li class="level-3 toc-link-遇到过缓存击穿吗-描述">遇到过缓存击穿吗？描述</li><li class="level-3 toc-link-如何避免缓存雪崩">如何避免缓存雪崩？</li><li class="level-3 toc-link-缓存是如何回收的">缓存是如何回收的？</li><li class="level-3 toc-link-缓存是如何预热的">缓存是如何预热的？</li><li class="level-3 toc-link-数据库与缓存不一致如何解决">数据库与缓存不一致如何解决</li><li class="level-2 toc-link-homework">Homework</li><li class="level-2 toc-link-五种数据结构">五种数据结构</li><li class="level-3 toc-link-字符串">字符串</li><li class="level-3 toc-link-哈希">哈希</li><li class="level-3 toc-link-列表">列表</li><li class="level-3 toc-link-集合">集合</li><li class="level-3 toc-link-有序集合">有序集合</li><li class="level-2 toc-link-订阅、事务、管道技术">订阅、事务、管道技术</li><li class="level-3 toc-link-发布-订阅模式">发布/订阅模式</li><li class="level-3 toc-link-事务">事务</li><li class="level-3 toc-link-管道">管道</li></ul></div><!--]--></div><div class="search-page" role="search"><span class="search-close"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 448 512" width="28" height="28" fill="currentColor"><path d="M224 416c-8.188 0-16.38-3.125-22.62-9.375l-192-192c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L224 338.8l169.4-169.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-192 192C240.4 412.9 232.2 416 224 416z"></path></svg></span><div class="gungnir-search-box"><input placeholder="$ grep ..." autocomplete="off" spellcheck="false" value><!----></div></div><div class="menu-btn-container"><div class="menu-btn-wrapper"><div class="menu-btn"><div style="" class="menu-btn-icon"><span></span><span></span><span></span></div><div style="display:none;" class="menu-text">0</div><svg class="menu-progress"><circle class="menu-border" cx="50%" cy="50%" r="48%" style="stroke-dasharray:0% 314.15926%;"></circle></svg></div><div class="menu-btn-child-wrapper"><div title="toggle color mode" class="menu-btn-child"><svg class="ov-icon" style="font-size:1.2em;display:none;" aria-hidden="true" width="19.2" height="19.2" viewbox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"/></svg><svg class="ov-icon" style="font-size:1.2em;display:none;" aria-hidden="true" width="19.2" height="19.2" viewbox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 00283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"/></svg><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M224 96l16-32 32-16-32-16-16-32-16 32-32 16 32 16 16 32zM80 160l26.66-53.33L160 80l-53.34-26.67L80 0 53.34 53.33 0 80l53.34 26.67L80 160zm352 128l-26.66 53.33L352 368l53.34 26.67L432 448l26.66-53.33L512 368l-53.34-26.67L432 288zm70.62-193.77L417.77 9.38C411.53 3.12 403.34 0 395.15 0c-8.19 0-16.38 3.12-22.63 9.38L9.38 372.52c-12.5 12.5-12.5 32.76 0 45.25l84.85 84.85c6.25 6.25 14.44 9.37 22.62 9.37 8.19 0 16.38-3.12 22.63-9.37l363.14-363.15c12.5-12.48 12.5-32.75 0-45.24zM359.45 203.46l-50.91-50.91 86.6-86.6 50.91 50.91-86.6 86.6z"/></svg></div><div class="menu-btn-child"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-75.52 -43.52 599.04 599.04" fill="currentColor"><path d="M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"/></svg></div><div class="menu-btn-child"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-75.52 -43.52 599.04 599.04" fill="currentColor"><path d="M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"/></svg></div><div class="menu-btn-child menu-toc-btn"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M48 48a48 48 0 1048 48 48 48 0 00-48-48zm0 160a48 48 0 1048 48 48 48 0 00-48-48zm0 160a48 48 0 1048 48 48 48 0 00-48-48zm448 16H176a16 16 0 00-16 16v32a16 16 0 0016 16h320a16 16 0 0016-16v-32a16 16 0 00-16-16zm0-320H176a16 16 0 00-16 16v32a16 16 0 0016 16h320a16 16 0 0016-16V80a16 16 0 00-16-16zm0 160H176a16 16 0 00-16 16v32a16 16 0 0016 16h320a16 16 0 0016-16v-32a16 16 0 00-16-16z"/></svg></div><div class="toggle-sidebar-button menu-btn-child menu-btn-sidebar" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-1.6 -1.6 19.2 19.2" fill="currentColor"><path d="M14 2a1 1 0 011 1v10a1 1 0 01-1 1H2a1 1 0 01-1-1V3a1 1 0 011-1h12zM2 1a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V3a2 2 0 00-2-2H2z"/><path d="M3 4a1 1 0 011-1h2a1 1 0 011 1v8a1 1 0 01-1 1H4a1 1 0 01-1-1V4z"/></svg></div></div></div></div><footer class="footer"><span>
      &copy; <a href="https://github.com/Alomerry" target="_blank">Alomerry Wu</a> 2018-2022
      <br>
      Powered by <a href="https://v2.vuepress.vuejs.org" target="_blank">VuePress</a> &
      <a href="https://github.com/Renovamen/vuepress-theme-gungnir" target="_blank">Gungnir</a>
    </span></footer></div><!--]--></div>
    <script type="module" src="/assets/app.c3e71323.js" defer></script>
  </body>
</html>
